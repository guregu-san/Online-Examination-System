{"ast":null,"code":"var _jsxFileName = \"/Users/matdiak/Downloads/Group5-Online-Examination-System-main-3/oes-frontend/src/pages/ExamEditor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { getExam, addQuestion, updateQuestion, deleteQuestion, reorderQuestions, autosaveExam, saveExam } from \"../api/backend\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AUTOSAVE_INTERVAL_MS = 2 * 60 * 1000; // 2 minutes\n\nfunction ExamEditor() {\n  _s();\n  var _location$state, _location$state2;\n  const {\n    examId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [courseCode, setCourseCode] = useState(((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.courseCode) || \"\");\n  const [instructorName, setInstructorName] = useState(((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.instructorName) || \"\");\n  const [timeLimit, setTimeLimit] = useState(60);\n  const [securitySettings, setSecuritySettings] = useState(\"shuffle=true\");\n  const [questions, setQuestions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [autosaveMsg, setAutosaveMsg] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  // Modal state (U3-UI3 / edit)\n  const [showModal, setShowModal] = useState(false);\n  const [editingQuestion, setEditingQuestion] = useState(null);\n  const [qType, setQType] = useState(\"MCQ\");\n  const [qText, setQText] = useState(\"\");\n  const [qOptions, setQOptions] = useState([{\n    text: \"\",\n    isCorrect: false\n  }, {\n    text: \"\",\n    isCorrect: false\n  }]);\n  const dragItem = useRef(null);\n  const dragOverItem = useRef(null);\n\n  // Load exam details from backend (U3-UI2)\n  useEffect(() => {\n    async function loadExam() {\n      try {\n        const exam = await getExam(examId);\n        setCourseCode(exam.courseCode || exam.course_code || courseCode);\n        setInstructorName(exam.instructorName || exam.instructor_name || instructorName);\n        if (exam.timeLimit || exam.time_limit) {\n          setTimeLimit(exam.timeLimit || exam.time_limit);\n        }\n        if (exam.securitySettings || exam.security_settings) {\n          setSecuritySettings(exam.securitySettings || exam.security_settings);\n        }\n        setQuestions(exam.questions || []);\n      } catch (err) {\n        console.error(err);\n        setErrorMsg(\"Failed to load exam. Check backend.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    loadExam();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [examId]);\n\n  // U3-UI6: Autosave every 2 minutes\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const payload = {\n          courseCode,\n          instructorName,\n          timeLimit,\n          securitySettings,\n          questions\n        };\n        await autosaveExam(examId, payload);\n        const t = new Date().toLocaleTimeString();\n        setAutosaveMsg(`Draft saved at ${t}`);\n      } catch (e) {\n        console.error(\"Autosave failed:\", e);\n      }\n    }, AUTOSAVE_INTERVAL_MS);\n    return () => clearInterval(interval);\n  }, [examId, courseCode, instructorName, timeLimit, securitySettings, questions]);\n  const openAddModal = () => {\n    setEditingQuestion(null);\n    setQType(\"MCQ\");\n    setQText(\"\");\n    setQOptions([{\n      text: \"\",\n      isCorrect: false\n    }, {\n      text: \"\",\n      isCorrect: false\n    }]);\n    setShowModal(true);\n  };\n  const openEditModal = q => {\n    setEditingQuestion(q);\n    setQType(q.type || \"MCQ\");\n    setQText(q.text || \"\");\n    setQOptions(q.options && q.options.length > 0 ? q.options : [{\n      text: \"\",\n      isCorrect: false\n    }]);\n    setShowModal(true);\n  };\n  const closeModal = () => {\n    setShowModal(false);\n  };\n  const addOptionField = () => {\n    setQOptions([...qOptions, {\n      text: \"\",\n      isCorrect: false\n    }]);\n  };\n  const updateOptionText = (index, text) => {\n    const updated = [...qOptions];\n    updated[index].text = text;\n    setQOptions(updated);\n  };\n  const toggleCorrect = index => {\n    const updated = [...qOptions];\n    updated[index].isCorrect = !updated[index].isCorrect;\n    setQOptions(updated);\n  };\n  const validateQuestion = () => {\n    if (!qText.trim()) return \"Question text is required.\";\n    if (qType === \"MCQ\" || qType === \"TRUE_FALSE\") {\n      const nonEmpty = qOptions.filter(opt => opt.text.trim() !== \"\");\n      if (nonEmpty.length === 0) {\n        return \"At least one answer option is required.\";\n      }\n      const correct = nonEmpty.some(opt => opt.isCorrect);\n      if (!correct) {\n        return \"At least one option must be marked as correct.\";\n      }\n    }\n    return null;\n  };\n  const handleSaveQuestion = async () => {\n    const validationError = validateQuestion();\n    if (validationError) {\n      alert(validationError);\n      return;\n    }\n    const payload = {\n      type: qType,\n      text: qText,\n      options: qType === \"MCQ\" || qType === \"TRUE_FALSE\" ? qOptions.filter(opt => opt.text.trim() !== \"\") : []\n    };\n    try {\n      let updatedList;\n      if (editingQuestion) {\n        const res = await updateQuestion(examId, editingQuestion.id, payload);\n        // assume backend returns updated question list or just updated question\n        if (Array.isArray(res.questions)) {\n          updatedList = res.questions;\n        } else {\n          updatedList = questions.map(q => q.id === editingQuestion.id ? {\n            ...editingQuestion,\n            ...payload\n          } : q);\n        }\n      } else {\n        const res = await addQuestion(examId, payload);\n        if (Array.isArray(res.questions)) {\n          updatedList = res.questions;\n        } else {\n          updatedList = [...questions, res.question || res];\n        }\n      }\n      setQuestions(updatedList);\n      setShowModal(false);\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save question. Check backend.\");\n    }\n  };\n  const handleDeleteQuestion = async questionId => {\n    if (!window.confirm(\"Delete this question?\")) return;\n    try {\n      await deleteQuestion(examId, questionId);\n      setQuestions(prev => prev.filter(q => q.id !== questionId));\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to delete question.\");\n    }\n  };\n\n  // Drag & drop (U3-UI5)\n  const handleDragStart = index => {\n    dragItem.current = index;\n  };\n  const handleDragEnter = index => {\n    dragOverItem.current = index;\n  };\n  const handleDrop = async () => {\n    const listCopy = [...questions];\n    const draggedItem = listCopy[dragItem.current];\n    listCopy.splice(dragItem.current, 1);\n    listCopy.splice(dragOverItem.current, 0, draggedItem);\n    dragItem.current = null;\n    dragOverItem.current = null;\n    setQuestions(listCopy);\n    try {\n      const orderedIds = listCopy.map(q => q.id);\n      await reorderQuestions(examId, orderedIds);\n    } catch (err) {\n      console.error(\"Failed to sync order with backend:\", err);\n    }\n  };\n  const handleSaveExam = async () => {\n    try {\n      const payload = {\n        courseCode,\n        instructorName,\n        timeLimit,\n        securitySettings,\n        questions\n      };\n      await saveExam(examId, payload);\n      alert(\"Exam saved successfully!\");\n      navigate(\"/instructor\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save exam.\");\n    }\n  };\n  const handlePreview = () => {\n    navigate(`/exam/${examId}/preview`);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading exam...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3\",\n      children: [\"Exam Editing \\u2013 Exam #\", examId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row g-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Course Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: courseCode,\n              onChange: e => setCourseCode(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Instructor Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: instructorName,\n              onChange: e => setInstructorName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Time Limit (min)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"form-control\",\n              value: timeLimit,\n              onChange: e => setTimeLimit(Number(e.target.value)),\n              min: 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Security\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: securitySettings,\n              onChange: e => setSecuritySettings(e.target.value),\n              placeholder: \"e.g. shuffle=true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Questions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary me-2\",\n          onClick: openAddModal,\n          children: \"+ Add Question\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline-secondary me-2\",\n          onClick: handlePreview,\n          children: \"Preview Exam\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: handleSaveExam,\n          children: \"Save Exam\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), autosaveMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info py-2 mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        children: autosaveMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 9\n    }, this), questions.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"No questions added yet. Use \\\"Add Question\\\".\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group mb-4\",\n      children: questions.map((q, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-start\",\n        draggable: true,\n        onDragStart: () => handleDragStart(index),\n        onDragEnter: () => handleDragEnter(index),\n        onDragEnd: handleDrop,\n        onDragOver: e => e.preventDefault(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge bg-secondary me-2\",\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: q.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: [\"Type: \", q.type || \"MCQ\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 19\n            }, this), q.options && q.options.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"mb-0\",\n              children: q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [opt.text, \" \", opt.isCorrect && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge bg-success ms-1\",\n                    children: \"Correct\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 368,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 27\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-sm btn-outline-primary me-2\",\n            onClick: () => openEditModal(q),\n            children: \"\\u270F\\uFE0F Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-sm btn-outline-danger\",\n            onClick: () => handleDeleteQuestion(q.id),\n            children: \"\\uD83D\\uDDD1 Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 15\n        }, this)]\n      }, q.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal d-block\",\n      style: {\n        backgroundColor: \"rgba(0,0,0,0.5)\",\n        position: \"fixed\",\n        inset: 0,\n        overflowY: \"auto\",\n        zIndex: 1050\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-dialog modal-lg mt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"modal-title\",\n              children: editingQuestion ? \"Edit Question\" : \"Add Question\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-close\",\n              onClick: closeModal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Question Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: qType,\n                onChange: e => setQType(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"MCQ\",\n                  children: \"Multiple Choice\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"TRUE_FALSE\",\n                  children: \"True / False\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"SHORT_ANSWER\",\n                  children: \"Short Answer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Question Text\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control\",\n                rows: 3,\n                value: qText,\n                onChange: e => setQText(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 17\n            }, this), (qType === \"MCQ\" || qType === \"TRUE_FALSE\") && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: [\"Answer Options\", \" \", /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: \"(mark one or more as correct)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 21\n              }, this), qOptions.map((opt, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-2 align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-text\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    className: \"form-check-input mt-0\",\n                    checked: opt.isCorrect,\n                    onChange: () => toggleCorrect(idx)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  placeholder: `Option ${idx + 1}`,\n                  value: opt.text,\n                  onChange: e => updateOptionText(idx, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 25\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-outline-secondary btn-sm\",\n                onClick: addOptionField,\n                children: \"+ Add Option\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 19\n            }, this), qType === \"SHORT_ANSWER\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-info py-2\",\n              children: \"Short answer: student will type a free-text response.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-secondary\",\n              onClick: closeModal,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: handleSaveQuestion,\n              children: editingQuestion ? \"Save Changes\" : \"Add Question\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n}\n_s(ExamEditor, \"i3HsR9wMujWBhz9OL+7HKfoE9iE=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = ExamEditor;\nexport default ExamEditor;\nvar _c;\n$RefreshReg$(_c, \"ExamEditor\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useLocation","useNavigate","useParams","getExam","addQuestion","updateQuestion","deleteQuestion","reorderQuestions","autosaveExam","saveExam","jsxDEV","_jsxDEV","AUTOSAVE_INTERVAL_MS","ExamEditor","_s","_location$state","_location$state2","examId","location","navigate","courseCode","setCourseCode","state","instructorName","setInstructorName","timeLimit","setTimeLimit","securitySettings","setSecuritySettings","questions","setQuestions","loading","setLoading","autosaveMsg","setAutosaveMsg","errorMsg","setErrorMsg","showModal","setShowModal","editingQuestion","setEditingQuestion","qType","setQType","qText","setQText","qOptions","setQOptions","text","isCorrect","dragItem","dragOverItem","loadExam","exam","course_code","instructor_name","time_limit","security_settings","err","console","error","interval","setInterval","payload","t","Date","toLocaleTimeString","e","clearInterval","openAddModal","openEditModal","q","type","options","length","closeModal","addOptionField","updateOptionText","index","updated","toggleCorrect","validateQuestion","trim","nonEmpty","filter","opt","correct","some","handleSaveQuestion","validationError","alert","updatedList","res","id","Array","isArray","map","question","handleDeleteQuestion","questionId","window","confirm","prev","handleDragStart","current","handleDragEnter","handleDrop","listCopy","draggedItem","splice","orderedIds","handleSaveExam","handlePreview","children","fileName","_jsxFileName","lineNumber","columnNumber","className","value","onChange","target","Number","min","placeholder","onClick","draggable","onDragStart","onDragEnter","onDragEnd","onDragOver","preventDefault","i","style","backgroundColor","position","inset","overflowY","zIndex","rows","idx","checked","_c","$RefreshReg$"],"sources":["/Users/matdiak/Downloads/Group5-Online-Examination-System-main-3/oes-frontend/src/pages/ExamEditor.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport {\n  getExam,\n  addQuestion,\n  updateQuestion,\n  deleteQuestion,\n  reorderQuestions,\n  autosaveExam,\n  saveExam,\n} from \"../api/backend\";\n\nconst AUTOSAVE_INTERVAL_MS = 2 * 60 * 1000; // 2 minutes\n\nfunction ExamEditor() {\n  const { examId } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const [courseCode, setCourseCode] = useState(\n    location.state?.courseCode || \"\"\n  );\n  const [instructorName, setInstructorName] = useState(\n    location.state?.instructorName || \"\"\n  );\n  const [timeLimit, setTimeLimit] = useState(60);\n  const [securitySettings, setSecuritySettings] = useState(\"shuffle=true\");\n  const [questions, setQuestions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [autosaveMsg, setAutosaveMsg] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  // Modal state (U3-UI3 / edit)\n  const [showModal, setShowModal] = useState(false);\n  const [editingQuestion, setEditingQuestion] = useState(null);\n  const [qType, setQType] = useState(\"MCQ\");\n  const [qText, setQText] = useState(\"\");\n  const [qOptions, setQOptions] = useState([\n    { text: \"\", isCorrect: false },\n    { text: \"\", isCorrect: false },\n  ]);\n\n  const dragItem = useRef(null);\n  const dragOverItem = useRef(null);\n\n  // Load exam details from backend (U3-UI2)\n  useEffect(() => {\n    async function loadExam() {\n      try {\n        const exam = await getExam(examId);\n        setCourseCode(exam.courseCode || exam.course_code || courseCode);\n        setInstructorName(\n          exam.instructorName || exam.instructor_name || instructorName\n        );\n        if (exam.timeLimit || exam.time_limit) {\n          setTimeLimit(exam.timeLimit || exam.time_limit);\n        }\n        if (exam.securitySettings || exam.security_settings) {\n          setSecuritySettings(\n            exam.securitySettings || exam.security_settings\n          );\n        }\n        setQuestions(exam.questions || []);\n      } catch (err) {\n        console.error(err);\n        setErrorMsg(\"Failed to load exam. Check backend.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    loadExam();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [examId]);\n\n  // U3-UI6: Autosave every 2 minutes\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      try {\n        const payload = {\n          courseCode,\n          instructorName,\n          timeLimit,\n          securitySettings,\n          questions,\n        };\n        await autosaveExam(examId, payload);\n        const t = new Date().toLocaleTimeString();\n        setAutosaveMsg(`Draft saved at ${t}`);\n      } catch (e) {\n        console.error(\"Autosave failed:\", e);\n      }\n    }, AUTOSAVE_INTERVAL_MS);\n\n    return () => clearInterval(interval);\n  }, [examId, courseCode, instructorName, timeLimit, securitySettings, questions]);\n\n  const openAddModal = () => {\n    setEditingQuestion(null);\n    setQType(\"MCQ\");\n    setQText(\"\");\n    setQOptions([\n      { text: \"\", isCorrect: false },\n      { text: \"\", isCorrect: false },\n    ]);\n    setShowModal(true);\n  };\n\n  const openEditModal = (q) => {\n    setEditingQuestion(q);\n    setQType(q.type || \"MCQ\");\n    setQText(q.text || \"\");\n    setQOptions(\n      q.options && q.options.length > 0\n        ? q.options\n        : [{ text: \"\", isCorrect: false }]\n    );\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  const addOptionField = () => {\n    setQOptions([...qOptions, { text: \"\", isCorrect: false }]);\n  };\n\n  const updateOptionText = (index, text) => {\n    const updated = [...qOptions];\n    updated[index].text = text;\n    setQOptions(updated);\n  };\n\n  const toggleCorrect = (index) => {\n    const updated = [...qOptions];\n    updated[index].isCorrect = !updated[index].isCorrect;\n    setQOptions(updated);\n  };\n\n  const validateQuestion = () => {\n    if (!qText.trim()) return \"Question text is required.\";\n\n    if (qType === \"MCQ\" || qType === \"TRUE_FALSE\") {\n      const nonEmpty = qOptions.filter((opt) => opt.text.trim() !== \"\");\n      if (nonEmpty.length === 0) {\n        return \"At least one answer option is required.\";\n      }\n      const correct = nonEmpty.some((opt) => opt.isCorrect);\n      if (!correct) {\n        return \"At least one option must be marked as correct.\";\n      }\n    }\n    return null;\n  };\n\n  const handleSaveQuestion = async () => {\n    const validationError = validateQuestion();\n    if (validationError) {\n      alert(validationError);\n      return;\n    }\n\n    const payload = {\n      type: qType,\n      text: qText,\n      options:\n        qType === \"MCQ\" || qType === \"TRUE_FALSE\"\n          ? qOptions.filter((opt) => opt.text.trim() !== \"\")\n          : [],\n    };\n\n    try {\n      let updatedList;\n      if (editingQuestion) {\n        const res = await updateQuestion(examId, editingQuestion.id, payload);\n        // assume backend returns updated question list or just updated question\n        if (Array.isArray(res.questions)) {\n          updatedList = res.questions;\n        } else {\n          updatedList = questions.map((q) =>\n            q.id === editingQuestion.id ? { ...editingQuestion, ...payload } : q\n          );\n        }\n      } else {\n        const res = await addQuestion(examId, payload);\n        if (Array.isArray(res.questions)) {\n          updatedList = res.questions;\n        } else {\n          updatedList = [...questions, res.question || res];\n        }\n      }\n      setQuestions(updatedList);\n      setShowModal(false);\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save question. Check backend.\");\n    }\n  };\n\n  const handleDeleteQuestion = async (questionId) => {\n    if (!window.confirm(\"Delete this question?\")) return;\n    try {\n      await deleteQuestion(examId, questionId);\n      setQuestions((prev) => prev.filter((q) => q.id !== questionId));\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to delete question.\");\n    }\n  };\n\n  // Drag & drop (U3-UI5)\n  const handleDragStart = (index) => {\n    dragItem.current = index;\n  };\n\n  const handleDragEnter = (index) => {\n    dragOverItem.current = index;\n  };\n\n  const handleDrop = async () => {\n    const listCopy = [...questions];\n    const draggedItem = listCopy[dragItem.current];\n    listCopy.splice(dragItem.current, 1);\n    listCopy.splice(dragOverItem.current, 0, draggedItem);\n\n    dragItem.current = null;\n    dragOverItem.current = null;\n\n    setQuestions(listCopy);\n\n    try {\n      const orderedIds = listCopy.map((q) => q.id);\n      await reorderQuestions(examId, orderedIds);\n    } catch (err) {\n      console.error(\"Failed to sync order with backend:\", err);\n    }\n  };\n\n  const handleSaveExam = async () => {\n    try {\n      const payload = {\n        courseCode,\n        instructorName,\n        timeLimit,\n        securitySettings,\n        questions,\n      };\n      await saveExam(examId, payload);\n      alert(\"Exam saved successfully!\");\n      navigate(\"/instructor\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to save exam.\");\n    }\n  };\n\n  const handlePreview = () => {\n    navigate(`/exam/${examId}/preview`);\n  };\n\n  if (loading) return <p>Loading exam...</p>;\n\n  return (\n    <div>\n      <h3 className=\"mb-3\">Exam Editing ‚Äì Exam #{examId}</h3>\n\n      {errorMsg && <div className=\"alert alert-danger\">{errorMsg}</div>}\n\n      {/* Basic exam settings */}\n      <div className=\"card mb-4\">\n        <div className=\"card-body\">\n          <div className=\"row g-3\">\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">Course Code</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                value={courseCode}\n                onChange={(e) => setCourseCode(e.target.value)}\n              />\n            </div>\n            <div className=\"col-md-4\">\n              <label className=\"form-label\">Instructor Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                value={instructorName}\n                onChange={(e) => setInstructorName(e.target.value)}\n              />\n            </div>\n            <div className=\"col-md-2\">\n              <label className=\"form-label\">Time Limit (min)</label>\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                value={timeLimit}\n                onChange={(e) => setTimeLimit(Number(e.target.value))}\n                min={1}\n              />\n            </div>\n            <div className=\"col-md-2\">\n              <label className=\"form-label\">Security</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                value={securitySettings}\n                onChange={(e) => setSecuritySettings(e.target.value)}\n                placeholder=\"e.g. shuffle=true\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Top actions (U3-UI2) */}\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <h4>Questions</h4>\n        <div>\n          <button className=\"btn btn-primary me-2\" onClick={openAddModal}>\n            + Add Question\n          </button>\n          <button className=\"btn btn-outline-secondary me-2\" onClick={handlePreview}>\n            Preview Exam\n          </button>\n          <button className=\"btn btn-success\" onClick={handleSaveExam}>\n            Save Exam\n          </button>\n        </div>\n      </div>\n\n      {/* Autosave indicator (U3-UI6) */}\n      {autosaveMsg && (\n        <div className=\"alert alert-info py-2 mb-3\">\n          <small>{autosaveMsg}</small>\n        </div>\n      )}\n\n      {/* U3-UI4 + U3-UI5: question list, edit/delete, reorder */}\n      {questions.length === 0 ? (\n        <p className=\"text-muted\">No questions added yet. Use \"Add Question\".</p>\n      ) : (\n        <ul className=\"list-group mb-4\">\n          {questions.map((q, index) => (\n            <li\n              key={q.id}\n              className=\"list-group-item d-flex justify-content-between align-items-start\"\n              draggable\n              onDragStart={() => handleDragStart(index)}\n              onDragEnter={() => handleDragEnter(index)}\n              onDragEnd={handleDrop}\n              onDragOver={(e) => e.preventDefault()}\n            >\n              <div>\n                <span className=\"badge bg-secondary me-2\">{index + 1}</span>\n                <strong>{q.text}</strong>\n                <div>\n                  <small className=\"text-muted\">\n                    Type: {q.type || \"MCQ\"}\n                  </small>\n                  {q.options && q.options.length > 0 && (\n                    <ul className=\"mb-0\">\n                      {q.options.map((opt, i) => (\n                        <li key={i}>\n                          <small>\n                            {opt.text}{\" \"}\n                            {opt.isCorrect && (\n                              <span className=\"badge bg-success ms-1\">\n                                Correct\n                              </span>\n                            )}\n                          </small>\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <button\n                  className=\"btn btn-sm btn-outline-primary me-2\"\n                  onClick={() => openEditModal(q)}\n                >\n                  ‚úèÔ∏è Edit\n                </button>\n                <button\n                  className=\"btn btn-sm btn-outline-danger\"\n                  onClick={() => handleDeleteQuestion(q.id)}\n                >\n                  üóë Delete\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n\n      {/* U3-UI3: Add/Edit Question Modal */}\n      {showModal && (\n        <div\n          className=\"modal d-block\"\n          style={{\n            backgroundColor: \"rgba(0,0,0,0.5)\",\n            position: \"fixed\",\n            inset: 0,\n            overflowY: \"auto\",\n            zIndex: 1050,\n          }}\n        >\n          <div className=\"modal-dialog modal-lg mt-5\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\">\n                  {editingQuestion ? \"Edit Question\" : \"Add Question\"}\n                </h5>\n                <button\n                  type=\"button\"\n                  className=\"btn-close\"\n                  onClick={closeModal}\n                ></button>\n              </div>\n\n              <div className=\"modal-body\">\n                <div className=\"mb-3\">\n                  <label className=\"form-label\">Question Type</label>\n                  <select\n                    className=\"form-select\"\n                    value={qType}\n                    onChange={(e) => setQType(e.target.value)}\n                  >\n                    <option value=\"MCQ\">Multiple Choice</option>\n                    <option value=\"TRUE_FALSE\">True / False</option>\n                    <option value=\"SHORT_ANSWER\">Short Answer</option>\n                  </select>\n                </div>\n\n                <div className=\"mb-3\">\n                  <label className=\"form-label\">Question Text</label>\n                  <textarea\n                    className=\"form-control\"\n                    rows={3}\n                    value={qText}\n                    onChange={(e) => setQText(e.target.value)}\n                  />\n                </div>\n\n                {(qType === \"MCQ\" || qType === \"TRUE_FALSE\") && (\n                  <div className=\"mb-3\">\n                    <label className=\"form-label\">\n                      Answer Options{\" \"}\n                      <small className=\"text-muted\">\n                        (mark one or more as correct)\n                      </small>\n                    </label>\n\n                    {qOptions.map((opt, idx) => (\n                      <div\n                        key={idx}\n                        className=\"input-group mb-2 align-items-center\"\n                      >\n                        <div className=\"input-group-text\">\n                          <input\n                            type=\"checkbox\"\n                            className=\"form-check-input mt-0\"\n                            checked={opt.isCorrect}\n                            onChange={() => toggleCorrect(idx)}\n                          />\n                        </div>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          placeholder={`Option ${idx + 1}`}\n                          value={opt.text}\n                          onChange={(e) =>\n                            updateOptionText(idx, e.target.value)\n                          }\n                        />\n                      </div>\n                    ))}\n\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-outline-secondary btn-sm\"\n                      onClick={addOptionField}\n                    >\n                      + Add Option\n                    </button>\n                  </div>\n                )}\n\n                {qType === \"SHORT_ANSWER\" && (\n                  <div className=\"alert alert-info py-2\">\n                    Short answer: student will type a free-text response.\n                  </div>\n                )}\n              </div>\n\n              <div className=\"modal-footer\">\n                <button className=\"btn btn-secondary\" onClick={closeModal}>\n                  Cancel\n                </button>\n                <button className=\"btn btn-primary\" onClick={handleSaveQuestion}>\n                  {editingQuestion ? \"Save Changes\" : \"Add Question\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ExamEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}