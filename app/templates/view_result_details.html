{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}


{%block title%} Exam Result {%endblock%}


{%block main_content%}

<div class="card-container">
    <div class="card wide">
        {% if message %}
            <h2 class="not-graded">{{ message }}</h2>
            <a href="/results?roll_number={{ request.args.get('roll_number') }}">Back</a>
        {% else %}

            <h1>{{ exam.title }} <small>({{ exam.course_code }})</small></h1>
            {% set total_possible = total_possible if total_possible is defined else 0 %}
            <p><strong>Total Score:</strong> {% if total_score is not none %}{{ total_score }} / {{ total_possible }}{% else %}- / {{ total_possible }}{% endif %}</p>

            <hr>

            {% for q in questions %}
                <div class="question-box">
                    <h3>Q{{ loop.index }}: {{ q.question_text }}</h3>
                    <p><strong>Points:</strong> {{ q.earned_points }} / {{ q.points }}</p>

                    {% for opt in q.options %}
                        <div class="option">
                            {% if opt.selected_by_student %}
                                <span class="selected">âœ” {{ opt.option_text }}</span>
                            {% else %}
                                {{ opt.option_text }}
                            {% endif %}

                            {% if opt.is_correct %}
                                <span class="correct"> (correct)</span>
                            {% endif %}
                        </div>
                    {% endfor %}

                </div>
            {% endfor %}

            <a href="/results?roll_number={{ request.args.get('roll_number') }}">Back to Results</a>

        {% endif %}
    </div>
</div>

{%endblock%}

