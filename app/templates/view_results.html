{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}


{%block title%} Exams {%endblock%}


{%block main_content%}
<div class="card-container">
    <div class="card wide">
        <h1>Exams</h1>

        <div class="filter-box">
    <form method="get">
        <input type="hidden" name="roll_number" value="{{ roll_number }}">

        <label>Course code:</label>
        <input type="text" name="course_code" value="{{ course_code }}" placeholder="e.g. CSC101">

        <label>Instructor:</label>
        <input type="text" name="instructor" value="{{ instructor_name }}" placeholder="Instructor name">

        <button type="submit">Search</button>
    </form>
        </div>

        <div style="overflow-x:auto; margin-top: 12px;">
            <table>
    <tr>
        <th>Exam Title</th>
        <th>Course</th>
        <th>Instructor</th>
        <th>Status</th>
        <th>Score</th>
        <th>View</th>
    </tr>

    {% for r in results %}
    <tr>
        <td>{{ r.title }}</td>
        <td>{{ r.course_code }}</td>
        <td>{{ r.instructor_name }}</td>
        <td>{{ r.status }}</td>
        <td>
            {% set total = r.total_points if r.total_points is not none else 0 %}
            {% if r.total_score is not none %}
                {{ r.total_score }} / {{ total }}
            {% else %}
                - / {{ total }}
            {% endif %}
        </td>
        <td>
            <a href="/results/{{ r.submission_id }}?roll_number={{ roll_number }}">
                View Result
            </a>
        </td>
    </tr>
        {% endfor %}
                </table>
            </div>

        </div>
    </div>

{%endblock%}
